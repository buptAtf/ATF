<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="import" href="./common/header.html?__inline">
    <link rel="import" href="./noLoginAlert.html?__inline">
    <link rel="stylesheet" type="text/css" href="../static/css/index.css">
    <link rel="stylesheet" type="text/css" href="../static/css/pagination.css">
    <link rel="stylesheet" type="text/css" href="../static/css/metroStyle.css">
    <link rel="stylesheet" type="text/css" href="../static/css/base.scss">
    <link rel="stylesheet" type="text/css" href="../static/css/scene-setting.scss">
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap-select.min.css">
    <!-- <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css"> -->
    <script src="../lib/jquery.js"></script>
    <script src="../static/js/highlight.pack.js"></script>
    <script src="../lib/jquery-ui.js"></script>
    <script src="../lib/bootstrap3.37.min.js"></script>
    <script src="../lib/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../lib/vue.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" type="text/css" href="../static/css/ascetic.css"/>
    <title>测试计划及执行</title>
    <style>
        .exe-info{
            padding-left: 10px；
        }
        .exe-info i{
            color: #58c9f3;
        }
        .case-main{
            white-space: nowrap
        }
        .modal-width {
            width: 1000px;
        }

        #log {
            opacity: 0.75;
            position: absolute;
            right: 0%;
            height: 50%;
            width: 50%;
            z-index: 9999;
        }

        #loghidden {
            position: absolute;
            right: 0%;
            height: auto;
            width: auto;
            z-index: 9999;
        }

        .display{
            display:none;
        }
        #hidden {
            float: left;
            height: auto;
            width: 5%;
            color: black;
        }
        #hidden-1 {
            overflow:hidden;
            height: auto;
            width: 38px;
            color: black;
            display:inline-block;
        }
        #logcontent {
            border: 1px solid #000;
            float: left;
            height: 100%;
            width: 95%;
        }

        #logShowBtn {
            float: right;
        }

        #logtext {
            float: left !important;
            height: 100%;
            width: 100%;
            overflow: hidden;
            z-index: 3;
        }

        #logarea {
            resize: none;
            color: white;
            background: #000;
            float: left !important;
            height: 100%;
            width: 100%;
            overflow: auto;
            z-index: 3;
        }

        #area {
            height: 90%;
            width: 100%;
        }
        .pre{
            height: 100%;
            z-index:100;
        }
        .case-lib-pad{
            margin:10px 5px;
        }
        .arrow-right{
            float: right;
            width:15px;
            height:30px;
            line-height: 30px;
            margin-top: 10px;
        }
        #main-content .content-wrapper .main .main-content .caseFlow{
            margin-right: 5px;
            display: inline-block;
            margin-bottom: 0;
            min-width: 50px;
            width: 175px;
            height: 30px;
            border: 0px solid #ddd5d5;
        }
        #main-content .content-wrapper .main .main-content .case .case-header-Flow{
            height: 30px;
            width:155px;
            margin-top: 10px;
            position: relative;
            background: white;
            border: 1px solid #ddd5d5;
            border-radius: 5px;
            flex: 0 0 auto;
            display: inline-block;
        }
    </style>
</head>
<body>
<!--header start-->
<link rel="import" href="./common/header-guide.html?__inline">
<!--header end-->
<!--sidebar start-->
<link rel="import" href="./common/aside-guide.html?__inline">
<!--sidebar end-->
<div id="v-body">
<div v-cloak>
    <div class="content">
        <!--main content start-->
        <section id="main-content">
            <section class="content-wrapper" style="margin-bottom: 50px;">
                <main class="main" style="padding: 15px; user-select: none;">
                    <!-- breadcrumb start -->
                    <div class="row" style="margin-bottom: 15px;">
                        <div class="col-lg-12">
                            <ul class="breadcrumb">
                                <li><a id = "myTitle"><i class="icon-home" id="myProjectName"></i> 项目测试 {{ projectName }}</a></li>
                                <li><a href="#"> 测试计划及执行</a></li>
                                <!-- <li class="active"> 对象库</li> -->
                            </ul>
                        </div>
                    </div>
                    <div class="main-content" id="testround-main" style="padding: 15px 0;">
                        <div class="row">
                            <form class="form-horizontal col-lg-12">
                                <div class="form-group col-lg-6">
                                    <label class="option-name control-label col-lg-3">测试计划及状态</label>
                                    <div class="col-lg-3">
                                        <select class="testphase form-control" v-model="testPlanId">
                                            <option v-for="(index,item) in testPlans" v-bind:value="item.id">
                                                {{item.nameMedium}}
                                            </option>
                                        </select>
                                    </div>
                                    <label class="option-name control-label col-lg-2" v-html="exeStautShow"></label>
                                    <div class=" col-lg-4">
                                        <a class="btn btn-white " @click="testPlanManager()"> 测试计划管理</a>
                                    </div>
                                </div>
                                <!-- <div class="form-group col-lg-6">
                                    <label class="option-name col-lg-3 control-label">
                                    执行轮次
                                    </label>
                                    <div class="col-lg-9">
                                    <input type="text" class="form-control" name="" v-model="executionround">
                                    </div>
                                </div> -->
                                <div class="form-group col-lg-6">
                                    <label class="option-name col-lg-3 control-label">
                                        执行范围
                                    </label>
                                    <div class="col-lg-9">
                                        <select class="execute-range form-control" v-model="exeScope">
                                            <option value="1" selected>所有</option>
                                            <option value="0">已选择</option>
                                        </select>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="row">
                            <form class="form-horizontal col-lg-12">
                                <div class="form-group col-lg-6">
                                    <label class="option-name control-label col-lg-3">执行机分配模式</label>
                                    <div class="col-lg-3">
                                        <select class="testphase form-control" v-model="runnerExecuteType">
                                            <option value="appointed" selected>指定执行机</option>
                                            <option value="auto"> 自动分配</option>
                                        </select>
                                    </div>
                                    <label class="option-name control-label col-lg-2">执行机选择</label>
                                    <div class=" col-lg-4 ">
                                        <select class="selectpicker execute-range form-control" id="runnerselected"
                                                v-model="runnerselected" multiple>
                                        </select>
                                    </div>
                                </div>
								<div class="form-group col-lg-6" hidden>
								    <label class="option-name col-lg-13 control-label">
									   当前测试轮次
									</label>
									<div class="col-lg-9">
										<span id="currentRound" class="execute-range form-control">正在等待数据加载</span>
									</div>

								</div>
                            </form>
                        </div>
                        <div class="test-control container" style="margin: 15px 5px;">
                            <div style="font-size: 12px;color:#999;"></div>
                            <button class="btn btn-white" @click="executeAll()"><i class="icon-play"></i> 批量执行</button>
                            <button class="btn btn-white" @click="stopExe()"><i class="icon-stop"></i> 终止执行</button>
                            <button class="btn btn-white" @click="getCases()"><i class=" icon-eye-open"></i> 查询</button>
                            <button class="btn btn-white" @click="addScene();"><i class="icon-plus"></i> 添加场景</button>
                            <button class="btn btn-white" @click="removeSceneAndCase();"><i class="icon-remove"></i>
                                移除场景与用例
                            </button>
                            <button class="btn btn-white" @click="reQuery();"><i class="icon-refresh"></i> 重新查询执行结果
                            </button>
                        </div>
                        <div id="">
                            <div v-show="logShow" id="log" ref="logShow">
                                <div id="hidden">
                                    <button id="logShowBtn" class="btn btn-white" @click=" updateScreen()"><i
                                            class="icon-double-angle-right"></i></button>
                                </div>
                                <div id="hidden-1">
                                    <button id="logFullBtn" v-if="fullFlag" class="btn btn-white" @click="fullScreen()"><i
                                            class="icon-fullscreen"></i></button>
                                    <button id="logSubBtn" v-else class="btn btn-white" @click="subScreen()"><i
                                            class="fa fa-compress"></i></button>
                                </div>
                                <div id="logcontent">
                                    <div class=" panel-info" id="logtext">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">运行日志</h3>
                                        </div>
                                        <div id="area">
                                            <pre class="pre"><code  id="logarea" class="javascript"></code></pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div v-else id="loghidden">
                                <div id="hidden">
                                    <button class="btn btn-white" @click="logShow=!logShow"><i
                                            class="icon-double-angle-left"> <font color='black'>展开日志</font></i></button>
                                </div>
                            </div>
                            <div class="main-content2">
                                <div class="case-list-wrapper list-wrapper" v-if="testCaseList.length"
                                     style="padding:10px 20px 10px 20px">
                                    <!-- <span class="case-list-title list-title">用例列表</span> -->
                                    <header class="panel-heading" style="margin: 0 -15px;">用例列表</header>
                                    <button class="hide-case-list btn btn-xs btn-info" @click="hideCaseList($event)"
                                            style="padding: 3px 6px; margin:5px 10px;" @mousedown.stop="1">
                                        <span>收起</span>&nbsp;&nbsp;<i class="icon-caret-down"></i></button>
                                    <div class="case-list">
                                        <div class="check-all-case" v-if="testCaseList.length"
                                             style="margin: 10px 10px;">全选
                                            <input type="checkbox" @change="checkallBox($event)" v-model="checkall">
                                        </div>
                                        <div id="sortable_caselist">
                                            <div class="case-lib" v-for="case_wrapper in testCaseList">
                                                <template v-if="case_wrapper.caseCompositeType == '1'">
                                                    <div class="checkbox-wrapper">
                                                        <i class="icon-move handle" style="color: #ff6c60;"></i>&nbsp;&nbsp;
                                                        <div style="display: inline-block; width: 20px; height: 20px;"
                                                             @mousedown.stop="1">
                                                            <input type="checkbox" :value="case_wrapper.caseId"
                                                                   @mousedown.stop="1" @change="checkallToggle($event)"
                                                                   class="checkall" v-model="selectedCases">
                                                        </div>
                                                    </div>
                                            </div>
                                            <div class="case-wrapper">
                                                <div class="case" @click="changeCase(case_wrapper.caseId, 1)"
                                                     @mousedown.stop="1">
                                                    <div class="case-header">
                                                        <img :src="exeImgs[0]" :id="'img' + '-' + case_wrapper.caseId">
                                                        <p class="width-limit"   :title="case_wrapper.casecode">{{case_wrapper.caseCode}}</p>
                                                        <input type="checkbox" v-bind:value="case_wrapper.caseId"
                                                               class="check-case single-case-incaselib"
                                                               v-model="selectedCases" @change="checkChanged($event)">
                                                        <p>
                                                            <a class="view-case"
                                                                @click.stop="viewCase(case_wrapper.caseId, 'PE4')"><span>查看</span></a>
                                                        </p>
                                                    </div>
                                                    <footer class="case-footer">

                                                    </footer>
                                                </div>
                                            </div>
                                            </template>
                                            <!-- 流程用例 -->
                                            <template v-else>
                                                <div class="checkbox-wrapper">
                                                    <i class="icon-move handle" style="color: #ff6c60;"></i>&nbsp;&nbsp;
                                                    <div style="display: inline-block; width: 20px; height: 20px;"
                                                         @mousedown.stop="1">
                                                        <input type="checkbox" :value="case_wrapper.caseId"
                                                               class="checkall" v-model="selectedCases"
                                                               @change="checkallToggle($event)" @mousedown.stop="1">
                                                    </div>
                                                </div>
                                                <div class="case-wrapper">
                                                    <div class="case" v-for="item in case_wrapper.flowNodes"
                                                         @mousedown.stop="1" @click="changeCase(item.flowNodeId, 2)">
                                                        <div class="case-header">
                                                            <img :src="exeImgs[0]" :id="'img' + '-' + item.flowNodeId">
                                                            <p class="width-limit"   :title="item.casecode">{{item.casecode}}</p>
                                                            <input type="checkbox" v-bind:value="item.flowNodeId"
                                                                   class="check-case flow-node-incaselib"
                                                                   @change="checkChanged($event)"
                                                                   v-model="checkedFlowNodes">
                                                            <p>
                                                                <a class="view-case"
                                                                    @click.stop="viewCase(case_wrapper.caseId, 'PE4')"><span>查看</span></a>
                                                            </p>
                                                        </div>
                                                        <footer class="case-footer">
                                                            2
                                                        </footer>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 场景列表 -->
                        <!-- <span class="case-list-title list-title" style="margin:10px 20px -10px 20px;" v-if="testSceneList.length">场景列表</span> -->
                        <header class="panel-heading" v-if="testSceneList.length">场景列表
                            <button class="hide-case-list btn btn-xs btn-info" @mousedown.stop="1"
                                    @click="saveScenesSort()">保存场景排序
                            </button>
                            <span class = "exe-info">
                                <i class = " icon-info-sign"></i>
                                场景内的用例串行执行，场景之间并行执行
                            </span>
                        </header>
                        <div id="sortable_sceneslist" style="margin-top: 20px;">
                            <div class="scene-list-wrapper  -wrapper" style="padding:0px 20px 10px 20px"
                                 v-for="scene in testSceneList">
                                <i class="icon-move handle2" style="color: #5a3c3c;"></i>&nbsp;&nbsp;
                                <div class="checkbox-wrapper"
                                     style="display: inline-block;vertical-align: top;padding: 2px 5px; position: relative; top: 9px;"
                                     @mousedown.stop="1">
                                    <input type="checkbox" :value="scene.sceneId" class="checkscene"
                                           v-bind:name="scene.id" v-model="selectedScenes"> <!-- lrqlrq-->
                                </div>
                                <span class="scene-list-title list-title" style="top: 2px;">{{scene.sceneName}}</span>
                                <button class="hide-case-list btn btn-xs btn-info" @click="hideCaseList($event)"
                                        @mousedown.stop="1"><span>展开</span>&nbsp;&nbsp;<i class="icon-caret-right"></i>
                                </button>
                                <button class="hide-case-list btn btn-xs btn-info" @mousedown.stop="1"
                                        @click="saveSort(scene.sceneId)">保存排序
                                </button>
                                <!-- <div class="case-list"> -->
                                <div class="case-list" style="display:none">
                                    <div class="check-all-case" v-if="scene.testCaseList.length"
                                         style="padding: 2px 5px;margin: 10px 10px;" @mousedown.stop="1">全选用例
                                        <input type="checkbox" @change="checkAllInScene($event)"
                                               class="checkall-inscene"
                                               :value="scene.sceneId" v-model="checkallSceneIds"
                                               style="position: relative; top: 3px;">
                                    </div>
                                    <div class="sortable_scene_caselist">
                                        <div class="case-lib case-lib-pad" v-for="case_wrapper in scene.testCaseList">
                                            <template v-if="case_wrapper.caseCompositeType == '1'">
                                                <div class="checkbox-wrapper">
                                                    <i class="icon-move handle1" style="color: #B8860B;"></i>&nbsp;&nbsp;
                                                    <div style="display: inline-block; width: 20px; height: 20px;"
                                                         @mousedown.stop="1">
                                                        <input type="checkbox"
                                                               :value="'sort'+'-'+scene.sceneId+'-'+case_wrapper.caseId"
                                                               class="check-flownodes" v-bind:name="case_wrapper.caseId"
                                                               v-model="selectedSceneCases"
                                                               @change="checkAllFlowNodes($event)">
                                                    </div>
                                                </div>
                                                <div class="case-wrapper">
                                                    <div class="case"
                                                         @click="changeCase(scene.sceneId+'-'+case_wrapper.caseId, 3)"
                                                         @mousedown.stop="1">
                                                        <div class="case-header">
                                                            <img :src="exeImgs[0]"
                                                                 :id="'img' + '-' + scene.sceneId+'-'+case_wrapper.caseId">
                                                            <p class="width-limit"   :title="case_wrapper.caseCode">
                                                                {{case_wrapper.caseCode}}</p>
                                                            <input type="checkbox"
                                                                   :value="'sort'+'-'+scene.sceneId+'-'+case_wrapper.caseId"
                                                                   class="check-case check-case-inscene"
                                                                   v-model="selectedSceneCases"
                                                                   @change="checkFlowNode($event)"> <!--lrlrq -->
                                                            <p>
                                                                <a class="view-case"
                                                                    @click.stop="viewCase(scene.sceneId, case_wrapper.caseId, 'PE6')"><span>查看</span></a>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="runnerclass"
                                                         :id="'runner' + '-' + scene.sceneId+'-'+case_wrapper.caseId">
                                                        <p></p>
                                                    </div>
                                                </div>
                                            </template>
                                            <template v-else>
                                                <div class="checkbox-wrapper">
                                                    <i class="icon-move handle1" style="color: #B8860B;"></i>&nbsp;&nbsp;
                                                    <div style="display: inline-block; width: 20px; height: 20px;"
                                                         @mousedown.stop="1">
                                                        <input type="checkbox"
                                                               :value="'sort'+'-'+scene.sceneId+'-'+case_wrapper.caseId"
                                                               v-bind:name="case_wrapper.caseId" class="check-flownodes"
                                                               @change="checkAllFlowNodes($event)"
                                                               v-model="selectedSceneCases">
                                                    </div>
                                                </div>
                                                <!-- <div class="case-wrapper" v-for = "index1 in (case_wrapper.flowNodes.length/7)">
                                                        <div class="case" v-for="index2 in 7" v-if = "case_wrapper.flowNodes[index1*7 + index2]"
                                                             @mousedown.stop="1"
                                                             @click="changeCase(scene.sceneId+ '-' + case_wrapper.caseId + '-' + case_wrapper.flowNodes[index1*7 + index2].flowNodeId, 3)">
                                                            <div class="case-header">
                                                                <img :src="exeImgs[0]"
                                                                     :id="'img' + '-' + scene.sceneId+ '-' + case_wrapper.caseId + '-' + case_wrapper.flowNodes[index1*7 + index2].flowNodeId">
                                                                <p :title="case_wrapper.flowNodes[index1*7 + index2].flowNodeCode">{{case_wrapper.flowNodes[index1*7 + index2].flowNodeCode}} </p>
                                                                <input type="checkbox"
                                                                       v-bind:value="scene.sceneId+ '-' + case_wrapper.caseId + '-' + case_wrapper.flowNodes[index1*7 + index2].flowNodeId"
                                                                       class="check-case check-case-inscene"
                                                                       @change="checkFlowNode($event)"
                                                                       v-model="selectedSceneCases">
                                                            </div>
                                                            <div class="case-main">
                                                                <a class="view-case"
                                                                   @click.stop="viewCase(scene.sceneId, case_wrapper.caseId, 'PE6')"><span>查看</span>
                                                                </a>
                                                            </div>
                                                            <footer class="case-footer">
                                                            </footer>
                                                        </div>
                                                        <div class="runnerclass"
                                                             :id="'runner' + '-' + scene.sceneId+'-'+case_wrapper.caseId">
                                                            <p></p>
                                                        </div>
                                                    </div> -->
                                                <div class="case-wrapper">
                                                    <div class="case caseFlow" v-for="(index,item) in case_wrapper.flowNodes"
                                                         @mousedown.stop="1"
                                                         @click="changeCase(scene.sceneId+ '-' + case_wrapper.caseId + '-' + item.flowNodeId, 3)">
                                                        <div class="case-header case-header-Flow">
                                                            <img :src="exeImgs[0]"
                                                                 :id="'img' + '-' + scene.sceneId+ '-' + case_wrapper.caseId + '-' + item.flowNodeId">
                                                            <p class="width-limit"  :title="item.flowNodeCode">{{item.flowNodeCode}} </p>
                                                            <input type="checkbox"
                                                                   v-bind:value="scene.sceneId+ '-' + case_wrapper.caseId + '-' + item.flowNodeId"
                                                                   class="check-case check-case-inscene"
                                                                   @change="checkFlowNode($event)"
                                                                   v-model="selectedSceneCases">
                                                            <p>
                                                                <a class="view-case"
                                                                @click.stop="viewCase(scene.sceneId, case_wrapper.caseId, 'PE6', item.flowNodeId)">查看
                                                                </a>
                                                            </p>
                                                                   <!-- <a class="view-case"
                                                                      @click.stop="viewCase(scene.sceneId, case_wrapper.caseId, 'PE6')"><span>查看</span></a> -->
                                                        </div>
                                                        <div class="arrow-right" :style="{display:(index != (case_wrapper.flowNodes.length - 1)? 'inline-block':'none')}"><i class="icon-long-arrow-right"></i></div>
                                                        <!-- <div class="case-main">
                                                        </div> -->
                                                        <footer class="case-footer">
                                                        </footer>
                                                    </div>
                                                    <div class="runnerclass"
                                                         :id="'runner' + '-' + scene.sceneId+'-'+case_wrapper.caseId">
                                                        <p></p>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                                <!-- </div> -->
                            </div>
                        </div>
                    </div>
    </div>
    </main>
    </section>
    <link rel="import" href="./common/copy-right.html?__inline">
    </section>
    <!--main content end-->
</div>
<!--content end -->
<div class="modal fade" id="add-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document" style="min-width:max-content">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">新增场景</h4>
            </div>
            <div class="modal-body">
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th scope="th">
                            <input type="checkbox" @change="selectAll($event);">全选
                        </th>
                        <th scope="col">场景名称</th>
                        <th scope="col">场景描述</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-for="scene in allscenes">
                        <td v-if="senceAddedStatus(scene.id)">已选择</td>
                        <td v-else><input type="checkbox" v-model="selectedScene" v-bind:value="scene.id"></td>
                        <td>{{scene.nameMedium}}</td>
                        <td>{{scene.descShort}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-lg-12 text-center">
                <div class="pagination-wrap" v-if="scenePage.totalPage!=0">
                    <div class="num">
                        <select size="1" name="sample_1_length" aria-controls="sample_1" class="form-control"
                                v-model="scenePage.pageSize" id="pageSizeSelect">
                            <option value="5" selected>5条/页</option>
                            <option value="10">10条/页</option>
                            <option value="20">20条/页</option>
                            <option value="50">50条/页</option>
                        </select>
                    </div>
                    <ul class="pagination">
                        <li :class="scenePage.currentPage==1?'disabled':''"><a href="javascript:;"
                                                                               @click="turnToScenePage(1)">首页</a></li>
                        <li :class="scenePage.currentPage==1?'disabled':''"><a
                                @click="turnToScenePage(scenePage.currentPage-1)" href="javascript:;">上一页</a></li>
                        <li>
                            <a href="javascript:;" @click="turnToScenePage(scenePage.currentPage-3)"
                               v-text="scenePage.currentPage-3" v-if="scenePage.currentPage-3>0"></a>
                        </li>
                        <li>
                            <a href="javascript:;" @click="turnToScenePage(scenePage.currentPage-2)"
                               v-text="scenePage.currentPage-2" v-if="scenePage.currentPage-2>0"></a>
                        </li>
                        <li>
                            <a href="javascript:;" @click="turnToScenePage(scenePage.currentPage-1)"
                               v-text="scenePage.currentPage-1" v-if="scenePage.currentPage-1>0"></a>
                        </li>
                        <li class="active"><a href="javascript:;" @click="turnToScenePage(scenePage.currentPage)"
                                              v-text="scenePage.currentPage">3</a></li>
                        <li>
                            <a href="javascript:;" @click="turnToScenePage(scenePage.currentPage+1)"
                               v-text="scenePage.currentPage+1" v-if="scenePage.currentPage+1<=scenePage.totalPage"></a>
                        </li>
                        <li>
                            <a href="javascript:;" @click="turnToScenePage(scenePage.currentPage+2)"
                               v-text="scenePage.currentPage+2" v-if="scenePage.currentPage+2<=scenePage.totalPage"></a>
                        </li>
                        <!-- <li>
                            <a href="javascript:;" @click="turnToScenePage(scenePage.currentPage+3)" v-text="scenePage.currentPage+3" v-if="scenePage.currentPage+3<=scenePage.totalPage"></a>
                        </li> -->
                        <li :class="scenePage.currentPage==scenePage.totalPage?'disabled':''"><a href="javascript:;"
                                                                                                 @click="turnToScenePage(scenePage.currentPage+1)">下一页</a>
                        </li>
                        <li :class="scenePage.currentPage==scenePage.totalPage?'disabled':''"><a href="javascript:;"
                                                                                                 @click="turnToScenePage(scenePage.totalPage)">尾页</a>
                        </li>
                    </ul>
                    <div class="go">
                        <div :class="isPageNumberError?'input-group error':'input-group'">
                            <input class="form-control" type="number" v-model="goToPage" min="1"
                                   max="{{scenePage.totalPage}}">
                            <a href="javascript:;" class="input-group-addon" @click="turnToScenePage(goToPage)">Go</a>
                        </div>
                    </div>
                    <p class="page-info nowrap"> 当前第 <span class="text-primary" v-text="scenePage.currentPage"></span> /
                        <span class="text-primary" v-text="scenePage.totalPage"></span>页，共有 <span class="text-primary"
                                                                                                  v-text="scenePage.totalCount"></span>
                        条</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" @click="sendSceneData()">确认</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!-- /.modal -->
</div>
<!--content end -->

<div class="modal fade" id="testplan_modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-width" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">测试计划管理</h4>
            </div>
            <div class="modal-body">
                <div class="top-bar">
                    <button type="button" class="btn btn-white" data-toggle='modal' @click='showAddModal()'><i
                            class="icon-plus"></i>
                        新增
                    </button>
                    <!-- <button class="btn btn-white" @click="showDeleteConfirm"><i class="icon-remove"></i>
                    删除</button>
                    <button class="btn btn-white" @click="showUpdateModal"><i class="icon-edit"></i>
                    修改</button> -->
                </div>
                <div class="main-content" style="padding: 20px;">
                    <table id="testplan-table" class="table table-bordered">
                        <thead>
                        <tr>
                            <!-- <th scope="col" class="text-center" style="width: 5%;">操作</th> -->
                            <!-- <th scope="col" class="text-center"  data-sort="desc" data-order="id" onclick="resort(this);">id<span class="icon-sort-up" aria-hidden="true"></span></th> -->
                            <th scope="col" class="text-center">名称</th>
                            <th scope="col" class="text-center">描述</th>
                            <!--<th scope="col" class="text-center">测试阶段</th>-->
                            <!--<th scope="col" class="text-center">测试轮次</th>-->
                            <th scope="col" class="text-center">操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="testPlan in testPlanArray">
                            <!-- <td style="width: 5%;">
                                <input  type="radio" v-bind:value="testPlan.id" @click="changeSelect(testPlan.id)" v-model="selectTestPlan">
                            </td> -->
                            <!-- <td>{{testPlan.id}}</td> -->
                            <td>{{testPlan.nameMedium}}</td>
                            <td>{{testPlan.descMedium}}</td>
                            <!--<td>{{testPlan.testPhaseName}}</td>-->
                            <!--<td>{{testPlan.testRoundName}}</td>-->
                            <td class="center " width="">
                                <button class="btn btn-xs btn-success" @click="showUpdateModal(testPlan.id)">修改</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <!-- 分页 -->
                    <div class="row">
                        <div class="col-lg-12 text-center">
                            <div class="pagination-wrap" v-if="page.totalPage!=0">
                                <div class="num">
                                    <select size="1" name="sample_1_length" aria-controls="sample_1"
                                            class="form-control" v-model="page.pageSize" @change='turnToPage(1)'>
                                        <option value="5">5条/页</option>
                                        <option value="10" selected>10条/页</option>
                                        <option value="20">20条/页</option>
                                        <option value="50">50条/页</option>
                                    </select>
                                </div>
                                <ul class="pagination">
                                    <li :class="page.currentPage==1?'disabled':''"><a href="javascript:;"
                                                                                      @click="turnToPage(1)">首页</a></li>
                                    <li :class="page.currentPage==1?'disabled':''"><a
                                            @click="turnToPage(page.currentPage-1)" href="javascript:;">上一页</a></li>
                                    <li>
                                        <a href="javascript:;" @click="turnToPage(page.currentPage-3)"
                                           v-text="page.currentPage-3" v-if="page.currentPage-3>0"></a>
                                    </li>
                                    <li>
                                        <a href="javascript:;" @click="turnToPage(page.currentPage-2)"
                                           v-text="page.currentPage-2" v-if="page.currentPage-2>0"></a>
                                    </li>
                                    <li>
                                        <a href="javascript:;" @click="turnToPage(page.currentPage-1)"
                                           v-text="page.currentPage-1" v-if="page.currentPage-1>0"></a>
                                    </li>
                                    <li class="active"><a href="javascript:;" @click="turnToPage(page.currentPage)"
                                                          v-text="page.currentPage">3</a></li>
                                    <li>
                                        <a href="javascript:;" @click="turnToPage(page.currentPage+1)"
                                           v-text="page.currentPage+1" v-if="page.currentPage+1<=page.totalPage"></a>
                                    </li>
                                    <li>
                                        <a href="javascript:;" @click="turnToPage(page.currentPage+2)"
                                           v-text="page.currentPage+2" v-if="page.currentPage+2<=page.totalPage"></a>
                                    </li>
                                    <li>
                                        <a href="javascript:;" @click="turnToPage(page.currentPage+3)"
                                           v-text="page.currentPage+3" v-if="page.currentPage+3<=page.totalPage"></a>
                                    </li>
                                    <li :class="page.currentPage==page.totalPage?'disabled':''"><a href="javascript:;"
                                                                                                   @click="turnToPage(page.currentPage+1)">下一页</a>
                                    </li>
                                    <li :class="page.currentPage==page.totalPage?'disabled':''"><a href="javascript:;"
                                                                                                   @click="turnToPage(page.totalPage)">尾页</a>
                                    </li>
                                </ul>
                                <div class="go">
                                    <div :class="isPageNumberError?'input-group error':'input-group'">
                                        <input class="form-control" type="number" v-model="goToPage" min="1"><a
                                            href="javascript:;" class="input-group-addon" @click="turnToPage(goToPage)">Go</a>
                                    </div>
                                </div>
                                <small class="small nowrap"> 当前第 <span class="text-primary"
                                                                       v-text="page.currentPage"></span> / <span
                                        class="text-primary" v-text="page.totalPage"></span>页，共有 <span
                                        class="text-primary" v-text="page.totalCount"></span> 条
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" @click="sendSceneData()">确认</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!--新增测试轮次 -->
<div class='modal fade' tabindex='-1' role='dialog' id='addTestRoundId' aria-hidden='true'
     aria-labelledby='addTestRound' data-toggle='modal'>
    <div class='modal-dialog '>
        <div class='modal-content'>
            <div class='modal-header'>
                <button type='button' class='close' data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class='modal-title' id='addTestRound'>新增测试轮次</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">名称</label>
                        <div class="col-sm-10">
                            <input type="text" v-model="addRoundRowData.roundName" class="form-control"
                                   autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">描述</label>
                        <div class="col-sm-10">
                            <textarea resize="disabled" v-model="addRoundRowData.roundDesc" class="form-control"
                                      autocomplete="off"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">记录单保存方式</label>
                        <div class="col-sm-10">
                            <select class="form-control" v-model="addRoundRowData.recordmanagementflag">
                                <option v-for="option in [{ value: 1, label: '仅保存一份' }, { value: 2, label: '保存多份' }]"
                                        :value="option.value" :key="option.value">
                                    {{option.label}}
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">定时执行方式</label>
                        <div class="col-sm-10">
                            <input type="text" v-model="addRoundRowData.timeexecutesetting" class="form-control"
                                   autocomplete="off">
                        </div>
                    </div>
                </form>
                <div class='modal-footer'>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" @click=addTestRound()>确认</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--新增模态框-->
<div class="modal fade" data-toggle="modal" id="addTestPlan" tabindex="-1" role="dialog" aria-labelledby="testPlanLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="testPlanLabel">新增测试计划</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label for="testplan-name" class="col-sm-2 control-label">测试计划名称</label>
                        <div class="col-sm-10">
                            <input type="text" v-model="addRowData.nameMedium" class="form-control" autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="testplan-desc" class="col-sm-2 control-label">测试计划描述</label>
                        <div class="col-sm-10">
                            <input type="text" v-model="addRowData.descMedium" class="form-control" autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group display" v-show="1 === editType">
                        <label class="col-sm-2 control-label">测试阶段</label>
                        <div class="col-sm-10">
                            <select name="testPhaseId" id="" class="form-control" v-model="addRowData.testPhaseId">
                                <option v-for="testPhase in testPhaseArray" :value="testPhase.id" :key="testPhase.id">
                                    {{testPhase.name}}
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group display" v-show="1 === editType"  >
                        <label class="col-sm-2 control-label">测试轮次</label>
                        <div class="col-sm-10">
                            <select name="testRoundId" v-model="addRowData.testRoundId" style="width:80%;height: 34px;"
                                    filterable placeholder="请选择">
                                <option
                                        v-for="testRound in testRoundArray"
                                        :key="testRound.id"
                                        :label="testRound.name"
                                        :value="testRound.id">
                                </option>
                            </select>
                            <button type="button" class="btn btn-primary btn-sm" data-toggle='modal'
                                    style="margin-left: 20px;" data-target="#addTestRoundId">新增
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button data-dismiss="modal" class="btn btn-default" type="button">取消</button>
                <button class="btn btn-success" type="button" id="btn-add" @click="add()">确定</button>
            </div>
        </div>
    </div>
</div>
<!--出错信息提示-->
<div class='modal fade' tabindex='-1' role='dialog' id='runInterrupt' aria-hidden='true'
     aria-labelledby='addTestRound' data-toggle='modal'>
    <div class='modal-dialog '>
        <div class='modal-content'>
            <div class='modal-header'>
                <button type='button' class='close' data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class='modal-title' id='addTestRound'>用理执行出错</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-8 control-label">执行用例出错，请选择是否继续执行，{{interruptTime}}后自动继续执行</label>
                    </div>
                </form>
                <div class='modal-footer'>
                    <button type="button" class="btn btn-default" @click=runContinue()>继续执行</button>
                    <button type="button" class="btn btn-primary" @click=runStop()>取消</button>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<!-- /.modal -->
<!-- <link rel="import" href="./common-vac/alert.html?__inline"> -->
<!-- <link rel="import" href="./common-vac/confirm.html?__inline"> -->

<script  src="../static/js/template/progressBar.js"></script>
<script src="../static/js/config.js"></script>
<script src="../static/js/vac-functions.es.js"></script>
<script src="../static/js/testplan-execute.es.js"></script>
<script src="../../lib/common-scripts.js"></script>

<script>

    jQuery(function ($) {
        //解决模态框背景色越来越深的问题
        $(document).on('show.bs.modal', '.modal', function (event) {
            $(this).appendTo($('body'));
        }).on('shown.bs.modal', '.modal.in', function (event) {
            setModalsAndBackdropsOrder();
        }).on('hidden.bs.modal', '.modal', function (event) {
            setModalsAndBackdropsOrder();
        });
        function setModalsAndBackdropsOrder() {
            var modalZIndex = 1040;
            $('.modal.in').each(function (index) {
                var $modal = $(this);
                modalZIndex++;
                $modal.css('zIndex', modalZIndex);
                $modal.next('.modal-backdrop.in').addClass('hidden').css('zIndex', modalZIndex - 1);
            });
            $('.modal.in:visible:last').focus().next('.modal-backdrop.in').removeClass('hidden');
        }

        //覆盖Modal.prototype的hideModal方法
        $.fn.modal.Constructor.prototype.hideModal = function () {
            var that = this
            this.$element.hide()
            this.backdrop(function () {
                //判断当前页面所有的模态框都已经隐藏了之后body移除.modal-open，即body出现滚动条。
                $('.modal.fade.in').length === 0 && that.$body.removeClass('modal-open')
                that.resetAdjustments()
                that.resetScrollbar()
                that.$element.trigger('hidden.bs.modal')
            })
        }
    });
</script>
	<script type="text/javascript" src="../static/js/testplan-execute.js"></script>
</body>
</html>
<!--  -->
